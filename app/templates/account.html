<header>
  <a href='#/inbox'><h1>Flybox</h1></a>
  <p data-ng-model='username'>Hello {{username}}</p>
  <button data-ng-click='logOut()'>Log out</button>
</header>

<main data-ng-init='index()'>
  <div data-ng-model='user'>
    <h2>Flybox Account</h2>

    <h3>Login</h3>
    <p>Username: {{user.email}}</p>
    <p>Password: ********</p>

    <h3>Display Name</h3>
    <p data-ng-show='!editname'>{{user.displayName}}</p>
    <input data-ng-show='editname' data-ng-model='user.newName'>
    <button data-ng-show='editname' data-ng-click='setName(); editname=false'>Save</button>
    <button data-ng-click='editname=!editname; user.newName=user.displayName'>{{editname ? 'Cancel':'Change'}}</button>

    <h3>Email Accounts</h3>
    <div data-ng-repeat='smtp in user.smtps'>
      <h4>{{smtp.auth.user}}</h4>
      <h6>Username:</h6>
      <p data-ng-show='!smtp.editing'>{{smtp.auth.user}}</p>
      <input data-ng-show='smtp.editing' data-ng-model='new.smtp.auth.user'>
      <h6>Password:</h6>
      <p data-ng-show='!smtp.editing'>{{smtp.auth.pass}}</p>
      <input data-ng-show='smtp.editing' data-ng-model='new.smtp.auth.pass'>
      <div data-ng-show='smtp.editing || smtp.service'>
        <h6>Service:</h6>
        <p data-ng-show='!smtp.editing'>{{smtp.service}}</p>
        <input data-ng-show='smtp.editing' data-ng-model='new.smtp.service'>
      </div>
      <div data-ng-show='smtp.editing || !smtp.service'>
        <h6>Host:</h6>
        <p data-ng-show='!smtp.editing'>{{smtp.host}}</p>
        <input data-ng-show='smtp.editing' data-ng-model='new.smtp.host'>
        <h6>Port:</h6>
        <p data-ng-show='!smtp.editing'>{{smtp.port}}</p>
        <input data-ng-show='smtp.editing' data-ng-model='new.smtp.port' type='Number'>
        <h6>Secure:</h6>
        <p data-ng-show='!smtp.editing'>{{smtp.secureConnection}}</p>
        <input data-ng-show='smtp.editing' data-ng-model='new.smtp.secureConnection' type='checkbox'>
      </div>
      <button data-ng-show='smtp.editing' data-ng-click='edit(new.smtp)'>Save</button>
      <button data-ng-click='smtp.editing=!smtp.editing; new.smtp=smtp'>{{smtp.editing ? 'Cancel':'Edit'}}</button>
      <button data-ng-click='delete(smtp)'>Delete</button>
    </div>

    <p data-ng-show='!adding'>{{user.smtps ? 'Expand your Flybox, add another account':'You have no email accounts set up'}}</p>
    <div data-ng-show='adding'>
      <h4>Please enter your login information</h4>
      <h6>Username:</h6>
      <input data-ng-model='newSmtp.auth.user'>
      <br>
      <h6>Password:</h6>
      <input data-ng-model='newSmtp.auth.pass'>
      <br>
      <h4>and fill in either</h4>
      <h6>Service:</h6>
      <a href='http://adilapapaya.com/docs/nodemailer/#wellknownservicesforsmtp'>list of acceptable services</a>
      <br>
      <input data-ng-model='newSmtp.service'>
      <br>
      <h4>or</h4>
      <h6>Host:</h6>
      <input data-ng-model='newSmtp.host'>
      <br>
      <h6>Secure:</h6>
      <input type='checkbox' data-ng-model='newSmtp.secureConnection'>
      <br>
      <h6>Port:</h6>
      <input type='Number' data-ng-model='newSmtp.port'>
      <br>
    </div>

    <button data-ng-show='adding' data-ng-click='add()'>Save</button>
    <button data-ng-click='adding=!adding'>{{adding ? 'Cancel':'Add'}}</button>
  </div>
</main>